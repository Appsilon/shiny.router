<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="shiny.router">
<title>Tutorial: shiny.router in Rhino applications • shiny.router</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Tutorial: shiny.router in Rhino applications">
<meta property="og:description" content="shiny.router">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-DVX9BJSBX4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DVX9BJSBX4');
</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-FQQZL5V93G"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FQQZL5V93G');
</script><script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">shiny.router</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    <a href="https://shiny.tools" class="external-link home"><i class="fa fa-lg fa-chevron-left"></i></a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Start
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">
    <span class="fa fa-university"></span>
     
    Tutorials
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Appsilon/shiny.router">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/Appsilon">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://fosstodon.org/@appsilon">
    <span class="fab fa fab fa-mastodon fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tutorial: shiny.router in Rhino applications</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Appsilon/shiny.router/blob/HEAD/vignettes/rhino.Rmd" class="external-link"><code>vignettes/rhino.Rmd</code></a></small>
      <div class="d-none name"><code>rhino.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>rhino</code> is a <code>shiny</code> framework focused on
building applications with the best software engineering practices in
mind. This tutorial will show you how you can use
<code>shiny.router</code> in a Rhino app.</p>
<p>You can read more about <code>rhino</code> on the <a href="https://appsilon.github.io/rhino/" class="external-link">documentation page</a>.</p>
</div>
<div class="section level2">
<h2 id="setup-rhino-application">Setup Rhino application<a class="anchor" aria-label="anchor" href="#setup-rhino-application"></a>
</h2>
<p>The first step is to create a Rhino application. Before that, make
sure that you have <code>rhino</code> installed:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rhino"</span><span class="op">)</span></span></code></pre></div>
<p>Now, initialize a new Rhino application. You can do it either by
using RStudio Wizard or a function
<code>rhino::init("rhino_router")</code>. More details on how to create
a Rhino app can be found in the <a href="https://appsilon.github.io/rhino/articles/tutorial/create-your-first-rhino-app.html#create-an-initial-application" class="external-link">Rhino
tutorial</a>.</p>
</div>
<div class="section level2">
<h2 id="add-the-basic-content">Add the basic content<a class="anchor" aria-label="anchor" href="#add-the-basic-content"></a>
</h2>
<p>To speed things up, we will use a basic version of the Rhino
application described in the <a href="https://appsilon.github.io/rhino/articles/tutorial/create-your-first-rhino-app.html" class="external-link">Rhino
tutorial</a>.</p>
<div class="section level3">
<h3 id="add-dependencies">Add dependencies<a class="anchor" aria-label="anchor" href="#add-dependencies"></a>
</h3>
<p>First, we need to add the required dependencies:</p>
<ol style="list-style-type: decimal">
<li>Install dependencies:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In the R console</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"echarts4r"</span>, <span class="st">"htmlwidgets"</span>, <span class="st">"reactable"</span>, <span class="st">"tidyr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Add dependencies to the <code>dependencies.R</code> file:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dependencies.R</span></span>
<span></span>
<span><span class="co"># This file allows packrat (used by rsconnect during deployment) to pick up dependencies.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://echarts4r.john-coene.com/" class="external-link">echarts4r</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ramnathv/htmlwidgets" class="external-link">htmlwidgets</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/" class="external-link">reactable</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://appsilon.github.io/rhino/" class="external-link">rhino</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Update the <code>renv.lock</code> file:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># in R console</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">snapshot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you want to learn more about dependency management in Rhino, check
<a href="https://appsilon.github.io/rhino/articles/how-to/manage-r-dependencies.html" class="external-link">this
guide</a>.</p>
</div>
<div class="section level3">
<h3 id="add-content">Add content<a class="anchor" aria-label="anchor" href="#add-content"></a>
</h3>
<p>Next, we need to fill the application with the content.</p>
<p>In <code>app/logic</code> add two files, <code>chart_utils.R</code>
and <code>data_transformation.R</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/chart_utils.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">htmlwidgets</span><span class="op">[</span><span class="va">JS</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">label_formatter</span> <span class="op">&lt;-</span> <span class="fu">JS</span><span class="op">(</span><span class="st">"(value, index) =&gt; value"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/logic/data_transformation.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">dplyr</span><span class="op">[</span><span class="va">arrange</span><span class="op">]</span>,</span>
<span>  <span class="va">tidyr</span><span class="op">[</span><span class="va">pivot_wider</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">transform_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data</span>,</span>
<span>    names_from <span class="op">=</span> <span class="va">Species</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">Population</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="va">Year</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We will add two views - a chart and a table. In <code>app/view</code>
add <code>chart.R</code> and <code>table.R</code> files:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/chart.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">echarts4r</span>,</span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">h3</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">tagList</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">chart_utils</span><span class="op">[</span><span class="va">label_formatter</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Chart"</span><span class="op">)</span>,</span>
<span>    <span class="va">echarts4r</span><span class="op">$</span><span class="fu">echarts4rOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">chart</span> <span class="op">&lt;-</span> <span class="va">echarts4r</span><span class="op">$</span><span class="fu">renderEcharts4r</span><span class="op">(</span></span>
<span>      <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">echarts4r</span><span class="op">$</span><span class="fu">group_by</span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">echarts4r</span><span class="op">$</span><span class="fu">e_chart</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">echarts4r</span><span class="op">$</span><span class="fu">e_line</span><span class="op">(</span><span class="va">Population</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">echarts4r</span><span class="op">$</span><span class="fu">e_x_axis</span><span class="op">(</span></span>
<span>          <span class="va">Year</span>,</span>
<span>          axisLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            formatter <span class="op">=</span> <span class="va">label_formatter</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">echarts4r</span><span class="op">$</span><span class="fu">e_tooltip</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/table.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">reactable</span>,</span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">h3</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">tagList</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">data_transformation</span><span class="op">[</span><span class="va">transform_data</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Table"</span><span class="op">)</span>,</span>
<span>    <span class="va">reactable</span><span class="op">$</span><span class="fu">reactableOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">reactable</span><span class="op">$</span><span class="fu">renderReactable</span><span class="op">(</span></span>
<span>      <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">transform_data</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">reactable</span><span class="op">$</span><span class="fu">reactable</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The last step is to update <code>app/main.R</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/bootstrapPage.html" class="external-link">bootstrapPage</a></span><span class="op">(</span></span>
<span>    <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Datasets are the only case when you need to use :: in `box`.</span></span>
<span>    <span class="co"># This issue should be solved in the next `box` release.</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">rhino</span><span class="fu">::</span><span class="va">rhinos</span></span>
<span></span>
<span>    <span class="va">table</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"table"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>    <span class="va">chart</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"chart"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now you can run the application with <code><a href="https://rdrr.io/pkg/shiny/man/runApp.html" class="external-link">shiny::runApp()</a></code> (or
“Run app” button, if you use RStudio). You should see something like
this:</p>
<p><img src="images/rhino_tutorial_1.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="add-router">Add router<a class="anchor" aria-label="anchor" href="#add-router"></a>
</h2>
<p>Next, let us move the table and the chart to separate pages using
<code>shiny.router</code>.</p>
<div class="section level3">
<h3 id="install-shiny-router">Install <code>shiny.router</code><a class="anchor" aria-label="anchor" href="#install-shiny-router"></a>
</h3>
<p>First, we need to install it:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In R console</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"shiny.router"</span><span class="op">)</span></span></code></pre></div>
<p>add to <code>dependencies.R</code> file:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dependencies.R</span></span>
<span></span>
<span><span class="co"># This file allows packrat (used by rsconnect during deployment) to pick up dependencies.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://echarts4r.john-coene.com/" class="external-link">echarts4r</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ramnathv/htmlwidgets" class="external-link">htmlwidgets</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/" class="external-link">reactable</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://appsilon.github.io/rhino/" class="external-link">rhino</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://appsilon.github.io/shiny.router/">shiny.router</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<p>and update <code>renv.lock</code> file:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># in R console</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">snapshot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-routing">Add routing<a class="anchor" aria-label="anchor" href="#add-routing"></a>
</h3>
<p>To enable routes in our application we need to modify the
<code>app/main.R</code> file:</p>
<ol style="list-style-type: decimal">
<li>Import <code>shiny.router</code> functions:</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">...</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Wrap UI modules in <code>router_ui</code>:</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/bootstrapPage.html" class="external-link">bootstrapPage</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/router_ui.html">router_ui</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">...</span></span></code></pre></div>
<p>Each module needs to be called inside the <code>route</code>
function. The first argument there is the route where the UI will be
placed (so for example now the chart will be available at
<code>{your app url}/chart</code>).</p>
<ol start="3" style="list-style-type: decimal">
<li>Add <code>router_server</code> to the server part of the main
module:</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/bootstrapPage.html" class="external-link">bootstrapPage</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/router_ui.html">router_ui</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/router_server.html">router_server</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Datasets are the only case when you need to use :: in `box`.</span></span>
<span>    <span class="co"># This issue should be solved in the next `box` release.</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">rhino</span><span class="fu">::</span><span class="va">rhinos</span></span>
<span></span>
<span>    <span class="va">table</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"table"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>    <span class="va">chart</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"chart"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>An important thing to mention here is that we had to provide the
default route (“table”) that will be displayed once someone opens the
application.</p>
<p>Now, when you run the application, you will see only the table. To
check the chart, you need to change the URL and replace “table” with
“chart”:</p>
<p><img src="images/rhino_tutorial_2.gif"></p>
</div>
</div>
<div class="section level2">
<h2 id="change-pages-from-ui">Change pages from UI<a class="anchor" aria-label="anchor" href="#change-pages-from-ui"></a>
</h2>
<p>Using only the URL to change the view does not seem to be the easiest
way, so we need to add navigation. To avoid reinventing the wheel, we
will utilize <a href="https://getbootstrap.com/docs/3.3/" class="external-link">Bootstrap</a>
CSS classes available in <code>shiny</code>.</p>
<p>Let’s add a navbar with two links - one for each view:</p>
<ol style="list-style-type: decimal">
<li>Import required functions from <code>shiny</code> and
<code>shiny.router</code>:</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">a</span>, <span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">tags</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span>, <span class="va">route_link</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">...</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Add navbar:</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">a</span>, <span class="va">bootstrapPage</span>, <span class="va">moduleServer</span>, <span class="va">tags</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span>, <span class="va">route_link</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/bootstrapPage.html" class="external-link">bootstrapPage</a></span><span class="op">(</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">nav</span><span class="op">(</span></span>
<span>      class <span class="op">=</span> <span class="st">"navbar"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"nav navbar-nav"</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Table"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Chart"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/router_ui.html">router_ui</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">...</span></span></code></pre></div>
<p>Now, the <code>route_link</code> function will build the links to our
views. A user can simply click the button in the navbar and it will open
a table or chart:</p>
<p><img src="images/rhino_tutorial_3.gif"></p>
</div>
<div class="section level2">
<h2 id="change-pages-from-the-server">Change pages from the server<a class="anchor" aria-label="anchor" href="#change-pages-from-the-server"></a>
</h2>
<p>The displayed page can be also changed from the server part of the
application. To demonstrate that, we will add another page - an
introduction with buttons that will move the user to either chart or
table page.</p>
<p>First, create <code>intro.R</code> file in <code>app/view</code>
directory. We will start with adding a UI - two Bootstrap jumbotrons
with some descriptions and buttons:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/intro.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">actionButton</span>, <span class="va">column</span>, <span class="va">div</span>, <span class="va">fluidRow</span>, <span class="va">h2</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">observeEvent</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"jumbotron"</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Click this button to check out the table:"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span></span>
<span>          inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"go_to_table"</span><span class="op">)</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"Table"</span>,</span>
<span>          class <span class="op">=</span> <span class="st">"btn-primary btn-lg"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"jumbotron"</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Click this button to check out the chart:"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span></span>
<span>          inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"go_to_chart"</span><span class="op">)</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"Chart"</span>,</span>
<span>          class <span class="op">=</span> <span class="st">"btn-primary btn-lg"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>A new view has to be added to our application - modify
<code>app/main.R</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">a</span>, <span class="va">fluidPage</span>, <span class="va">moduleServer</span>, <span class="va">tags</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span>, <span class="va">route_link</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">intro</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">nav</span><span class="op">(</span></span>
<span>      class <span class="op">=</span> <span class="st">"navbar"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"nav navbar-nav"</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Home"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"/"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Table"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Chart"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/router_ui.html">router_ui</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"/"</span>, <span class="va">intro</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"intro"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/router_server.html">router_server</a></span><span class="op">(</span><span class="st">"/"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Datasets are the only case when you need to use :: in `box`.</span></span>
<span>    <span class="co"># This issue should be solved in the next `box` release.</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">rhino</span><span class="fu">::</span><span class="va">rhinos</span></span>
<span></span>
<span>    <span class="va">intro</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"intro"</span><span class="op">)</span></span>
<span>    <span class="va">table</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"table"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>    <span class="va">chart</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="st">"chart"</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>You might have noticed that we have changed the argument passed to
the <code>router_server</code> function. Now our default page will be
just the application URL. In fact, we could omit this argument,
since<code>"/"</code> is the default value there.</p>
<p>Now, we need to add logic for changing the page on button click:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/intro.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">actionButton</span>, <span class="va">column</span>, <span class="va">div</span>, <span class="va">fluidRow</span>, <span class="va">h2</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">observeEvent</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">change_page</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"jumbotron"</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Click this button to check out the table:"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span></span>
<span>          inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"go_to_table"</span><span class="op">)</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"Table"</span>,</span>
<span>          class <span class="op">=</span> <span class="st">"btn-primary btn-lg"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>      width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"jumbotron"</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Click this button to check out the chart:"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span></span>
<span>          inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"go_to_chart"</span><span class="op">)</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"Chart"</span>,</span>
<span>          class <span class="op">=</span> <span class="st">"btn-primary btn-lg"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">go_to_table</span>, <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/change_page.html">change_page</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">go_to_chart</span>, <span class="op">{</span></span>
<span>      <span class="fu"><a href="../reference/change_page.html">change_page</a></span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We used the <code>change_page</code> function to change the URL and
as a consequence, the displayed view.</p>
<p>Now, your application should behave like that:</p>
<p><img src="images/rhino_tutorial_4.gif"></p>
</div>
<div class="section level2">
<h2 id="query-parameters">Query parameters<a class="anchor" aria-label="anchor" href="#query-parameters"></a>
</h2>
<p>Another feature of <code>shiny.router</code> that can be used in our
example is the ability to read query parameters from the URL. We will
demonstrate this by showing how you can control the number of rows
displayed in the table.</p>
<div class="section level3">
<h3 id="read-query-parameter">Read query parameter<a class="anchor" aria-label="anchor" href="#read-query-parameter"></a>
</h3>
<p>We will start by adding an ability to read the <code>pageSize</code>
parameter, which will change the number of displayed rows (so for
example opening URL: <code>{your app url}/table?pageSize=12</code>) will
show a table with 12 rows).</p>
<p>Modify <code>app/view/table.R</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/table.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">reactable</span>,</span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">h3</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">observeEvent</span>, <span class="va">reactive</span>, <span class="va">req</span>, <span class="va">tagList</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">get_query_param</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">data_transformation</span><span class="op">[</span><span class="va">transform_data</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Table"</span><span class="op">)</span>,</span>
<span>    <span class="va">reactable</span><span class="op">$</span><span class="fu">reactableOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="va">ns</span></span>
<span></span>
<span>    <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_query_param.html">get_query_param</a></span><span class="op">(</span><span class="st">"pageSize"</span><span class="op">)</span></span>
<span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>      <span class="op">}</span></span>
<span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">reactable</span><span class="op">$</span><span class="fu">renderReactable</span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">transform_data</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">reactable</span><span class="op">$</span><span class="fu">reactable</span><span class="op">(</span></span>
<span>          defaultPageSize <span class="op">=</span> <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><code>get_query_param</code> reads the query parameters from an URL.
The value is then passed to the table to set the number of rows. If the
param is not set, it will display 10 rows.</p>
</div>
<div class="section level3">
<h3 id="update-query-parameter">Update query parameter<a class="anchor" aria-label="anchor" href="#update-query-parameter"></a>
</h3>
<p>Let’s implement the opposite feature - we will add a page size
dropdown to the table and update the query parameter according to its
value.</p>
<p>First, add the page size option to the table:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/table.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">reactable</span>,</span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">h3</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">reactive</span>, <span class="va">req</span>, <span class="va">tagList</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">get_query_param</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">data_transformation</span><span class="op">[</span><span class="va">transform_data</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Table"</span><span class="op">)</span>,</span>
<span>    <span class="va">reactable</span><span class="op">$</span><span class="fu">reactableOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="va">ns</span></span>
<span></span>
<span>    <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_query_param.html">get_query_param</a></span><span class="op">(</span><span class="st">"pageSize"</span><span class="op">)</span></span>
<span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>      <span class="op">}</span></span>
<span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">reactable</span><span class="op">$</span><span class="fu">renderReactable</span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">transform_data</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">reactable</span><span class="op">$</span><span class="fu">reactable</span><span class="op">(</span></span>
<span>          defaultPageSize <span class="op">=</span> <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span>,</span>
<span>          showPageSizeOptions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          pageSizeOptions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now you can change the page size using the table dropdown, but it
still does not update the query parameter. To achieve that, we need to
add one more element:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/table.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">reactable</span>,</span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">h3</span>, <span class="va">moduleServer</span>, <span class="va">NS</span>, <span class="va">observeEvent</span>, <span class="va">reactive</span>, <span class="va">req</span>, <span class="va">tagList</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">change_page</span>, <span class="va">get_query_param</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">logic</span><span class="op">/</span><span class="va">data_transformation</span><span class="op">[</span><span class="va">transform_data</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Table"</span><span class="op">)</span>,</span>
<span>    <span class="va">reactable</span><span class="op">$</span><span class="fu">reactableOutput</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="va">ns</span></span>
<span></span>
<span>    <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_query_param.html">get_query_param</a></span><span class="op">(</span><span class="st">"pageSize"</span><span class="op">)</span></span>
<span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">page_size</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>      <span class="op">}</span></span>
<span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">page_size</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">reactable</span><span class="op">$</span><span class="fu">renderReactable</span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">transform_data</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="va">reactable</span><span class="op">$</span><span class="fu">reactable</span><span class="op">(</span></span>
<span>          defaultPageSize <span class="op">=</span> <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span>,</span>
<span>          showPageSizeOptions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          pageSizeOptions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">reactable</span><span class="op">$</span><span class="fu">getReactableState</span><span class="op">(</span><span class="st">"table"</span>, <span class="st">"pageSize"</span><span class="op">)</span>, <span class="op">{</span></span>
<span>      <span class="va">table_page_size</span> <span class="op">&lt;-</span> <span class="va">reactable</span><span class="op">$</span><span class="fu">getReactableState</span><span class="op">(</span><span class="st">"table"</span>, <span class="st">"pageSize"</span><span class="op">)</span></span>
<span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">table_page_size</span> <span class="op">!=</span> <span class="fu">page_size</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="../reference/change_page.html">change_page</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"table?pageSize="</span>, <span class="va">table_page_size</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This way changing the page size will modify the displayed query
parameter:</p>
<p><img src="images/rhino_tutorial_5.gif"></p>
</div>
</div>
<div class="section level2">
<h2 id="page">404 page<a class="anchor" aria-label="anchor" href="#page"></a>
</h2>
<p>As the final step, we will show how to handle a situation, when a
user tries to open a wrong URL. <code>shiny.router</code> comes with a
default 404 page that will be displayed in such case, but you can easily
replace it with a custom one.</p>
<p>We will build a new page, with a message and a button that will move
the user back to the home page of the application.</p>
<p>Create a new file called <code>page_404.R</code> in the
<code>app/view</code> directory:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/view/page_404.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">a</span>, <span class="va">div</span>, <span class="va">h1</span>, <span class="va">moduleServer</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">route_link</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Whoops! Something went wrong!"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Back to home page"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"/"</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"btn btn-primary btn-lg"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Now, we need to add this custom view to the router as the 404
page:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># app/main.R</span></span>
<span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">shiny</span><span class="op">[</span><span class="va">a</span>, <span class="va">fluidPage</span>, <span class="va">moduleServer</span>, <span class="va">tags</span>, <span class="va">NS</span><span class="op">]</span>,</span>
<span>  <span class="va">shiny.router</span><span class="op">[</span><span class="va">router_ui</span>, <span class="va">router_server</span>, <span class="va">route</span>, <span class="va">route_link</span><span class="op">]</span>,</span>
<span><span class="op">)</span></span>
<span><span class="fu">box</span><span class="fu">::</span><span class="fu">use</span><span class="op">(</span></span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">intro</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">chart</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">table</span>,</span>
<span>  <span class="va">app</span><span class="op">/</span><span class="va">view</span><span class="op">/</span><span class="va">page_404</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">nav</span><span class="op">(</span></span>
<span>      class <span class="op">=</span> <span class="st">"navbar"</span>,</span>
<span>      <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span></span>
<span>        class <span class="op">=</span> <span class="st">"nav navbar-nav"</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Home"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"/"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Table"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">a</a></span><span class="op">(</span><span class="st">"Chart"</span>, href <span class="op">=</span> <span class="fu"><a href="../reference/route_link.html">route_link</a></span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/router_ui.html">router_ui</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"/"</span>, <span class="va">intro</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"intro"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"table"</span>, <span class="va">table</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="va">chart</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"chart"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      page_404 <span class="op">=</span> <span class="va">page_404</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"page_404"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">...</span></span></code></pre></div>
<p>And that’s it. If you run the application and try to go to a
non-existing route, you should see something similar to this:</p>
<p><img src="images/rhino_tutorial_6.gif"></p>
<hr>
<p><strong>Congratulations! You have successfully upgraded your Rhino
application with routing!</strong></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed with <span class="emoji" data-emoji="heart">❤️</span> by <a href="https://appsilon.com" class="external-link">Appsilon</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
